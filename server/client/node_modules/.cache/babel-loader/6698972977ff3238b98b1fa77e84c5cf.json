{"ast":null,"code":"import _defineProperty from\"C:/Users/Sinbad/Desktop/prac/grapgqlCNQ/server/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Sinbad/Desktop/prac/grapgqlCNQ/server/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Sinbad/Desktop/prac/grapgqlCNQ/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{useMutation}from\"@apollo/client\";import{LOGIN}from\"../gql/mutations\";import{GET_MY_PROFILE}from\"../gql/queries\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useMutation=useMutation(LOGIN,{onCompleted:function onCompleted(data){localStorage.setItem(\"token\",data.login.token);navigate(\"/\");},refetchQueries:[{query:GET_MY_PROFILE}]}),_useMutation2=_slicedToArray(_useMutation,2),Login=_useMutation2[0],_useMutation2$=_useMutation2[1],loading=_useMutation2$.loading,error=_useMutation2$.error;if(loading)return/*#__PURE__*/_jsx(\"h1\",{children:\" loading \"});var handleChange=function handleChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();Login({variables:{user:formData}});};return/*#__PURE__*/_jsxs(\"div\",{children:[error&&error.message,/*#__PURE__*/_jsx(\"h5\",{children:\" Login! \"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"email\",name:\"email\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",name:\"password\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\" Login \"})]}),/*#__PURE__*/_jsx(Link,{to:\"/signUp\",children:\"Need an account\"})]});};export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","useMutation","LOGIN","GET_MY_PROFILE","Login","navigate","formData","setFormData","onCompleted","data","localStorage","setItem","login","token","refetchQueries","query","loading","error","handleChange","e","target","name","value","handleSubmit","preventDefault","variables","user","message"],"sources":["C:/Users/Sinbad/Desktop/prac/grapgqlCNQ/server/client/src/components/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { LOGIN } from \"../gql/mutations\";\r\nimport { GET_MY_PROFILE } from \"../gql/queries\";\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({});\r\n  const [Login, { loading, error }] = useMutation(LOGIN, {\r\n    onCompleted(data) {\r\n      localStorage.setItem(\"token\", data.login.token);\r\n      navigate(\"/\");\r\n    },\r\n    refetchQueries: [{ query: GET_MY_PROFILE }],\r\n  });\r\n\r\n  if (loading) return <h1> loading </h1>;\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    Login({\r\n      variables: {\r\n        user: formData,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {error && error.message}\r\n      <h5> Login! </h5>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"email\"\r\n          name=\"email\"\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <br />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"password\"\r\n          name=\"password\"\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <br />\r\n\r\n        <button type=\"submit\"> Login </button>\r\n      </form>\r\n\r\n      <Link to=\"/signUp\">Need an account</Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"kaAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,OAASC,KAAT,KAAsB,kBAAtB,CACA,OAASC,cAAT,KAA+B,gBAA/B,C,wFAEA,GAAMC,MAAK,CAAG,gBAAM,CAClB,GAAMC,SAAQ,CAAGL,WAAW,EAA5B,CACA,cAAgCF,QAAQ,CAAC,EAAD,CAAxC,wCAAOQ,QAAP,eAAiBC,WAAjB,eACA,iBAAoCN,WAAW,CAACC,KAAD,CAAQ,CACrDM,WADqD,sBACzCC,IADyC,CACnC,CAChBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,IAAI,CAACG,KAAL,CAAWC,KAAzC,EACAR,QAAQ,CAAC,GAAD,CAAR,CACD,CAJoD,CAKrDS,cAAc,CAAE,CAAC,CAAEC,KAAK,CAAEZ,cAAT,CAAD,CALqC,CAAR,CAA/C,8CAAOC,KAAP,kDAAgBY,OAAhB,gBAAgBA,OAAhB,CAAyBC,KAAzB,gBAAyBA,KAAzB,CAQA,GAAID,OAAJ,CAAa,mBAAO,iCAAP,CAEb,GAAME,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAAO,CAC1BZ,WAAW,gCACND,QADM,wBAERa,CAAC,CAACC,MAAF,CAASC,IAFD,CAEQF,CAAC,CAACC,MAAF,CAASE,KAFjB,GAAX,CAID,CALD,CAOA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACJ,CAAD,CAAO,CAC1BA,CAAC,CAACK,cAAF,GACApB,KAAK,CAAC,CACJqB,SAAS,CAAE,CACTC,IAAI,CAAEpB,QADG,CADP,CAAD,CAAL,CAKD,CAPD,CASA,mBACE,uBACGW,KAAK,EAAIA,KAAK,CAACU,OADlB,cAEE,gCAFF,cAGE,cAAM,QAAQ,CAAEJ,YAAhB,wBACE,cACE,IAAI,CAAC,OADP,CAEE,WAAW,CAAC,OAFd,CAGE,IAAI,CAAC,OAHP,CAIE,QAAQ,CAAEL,YAJZ,CAKE,QAAQ,KALV,EADF,cAQE,aARF,cASE,cACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,CAAEA,YAJZ,CAKE,QAAQ,KALV,EATF,cAgBE,aAhBF,cAkBE,eAAQ,IAAI,CAAC,QAAb,qBAlBF,GAHF,cAwBE,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,6BAxBF,GADF,CA4BD,CAzDD,CA2DA,cAAed,MAAf"},"metadata":{},"sourceType":"module"}